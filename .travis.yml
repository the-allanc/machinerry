language: python
python:
- 2.7
- 3.6
before_install:
- "! grep -R SKELETON | grep -v grep"
install:
- pip install -r requirements-dev.txt
- pip install coveralls pytest-cov
script:
- python setup.py checkdocs
- py.test --cov machinerry tests/
- sphinx-build -W docs/ build/docs/
- pylint --disable=W machinerry.py
after_script:
- flake8
- pylint machinerry.py
branches:
  except:
  - skeleton
deploy:
  provider: pypi
  server: https://upload.pypi.org/legacy/
  on:
    tags: true
    all_branches: true
  user: amc6010
  distributions: dists
  password:
    secure: LLP9Wf20gcNZIhw4O7Xp5wa3KXliqf/3jpBB92YKYXVbcbXVsyYti94ymo2t5NKS0+IW5DW3ynoJFBY4nZ0Si7SDNrdc+PT9TAYykIyt7qfWHfl5mcZKM4hK7yxHiwjo1GSKVB/LRco3KVRNRjY2VzXh4MGyKy0csf7+gqgwh0TKOOq1JpIsdGE1lD9+QyzzyrqZRDpq/+s6L1A1Q2ygB2/8vjTLl7Mz/EAr4I9Z1+fjsxhuzyO2y8GQtM+Szvr8Wose9btcAkVfMjmUYsQJHPOmUl2GYG62d1/xelqB7m2v0X+Uxjfx+tgOL6PSw+z8Q0Kv7l1OcWDO4ymiNcRB8Gd18Tewv3baFvuBvD8UoBl1v5abC6VLqLEuPQ+5+ihPh2gVrnsmiHOq8AMp+VHd9jYyb1bCAxQOE9rvTlW3hRbA8lflMO4qNWCRs4n27SJiuf6o8xr1cnypcrs9YRs7sfu8yWivHIDi0zpl0dkzSa5zUbCMC38ASWJRG4HRsYbM7sG6+Ubv7plEwJGPLXhoSWUZC8cn3175sUm1GH/etjJKWFn4bWbLWY1/pkSUWaXbYg2C9yvQjMwr/mWyeimGHGbTcfZB4nvhPDBCMuUudP2ar62yJJbJXC+pE2etIzEA1s4DUiMm9ra88morh+Y3OiZoR2+0p7wduB2EofCc8BU=
after_success:
- coveralls
